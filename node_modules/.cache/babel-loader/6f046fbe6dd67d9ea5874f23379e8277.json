{"ast":null,"code":"var _jsxFileName = \"/Users/williamstansbury/Desktop/CS185/test-app/src/Components/Graph.js\";\nimport React, { Component } from 'react';\n\nvar d3 = require(\"d3\");\n\nconst data = {\n  nodes: [{\n    name: \"John\",\n    group: 1\n  }, {\n    name: \"Jane\",\n    group: 1\n  }, {\n    name: \"Doe\",\n    group: 2\n  }],\n  links: [{\n    source: 1,\n    target: 1,\n    value: 1\n  }]\n};\nexport class Graph extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.drag = simulation => {\n      function dragStarted(d) {\n        if (!d3.event.active) simulation.alphaTarget(0.3).restart();\n        d.fx = d.x;\n        d.fy = d.y;\n      }\n\n      function dragged(d) {\n        d.fx = d3.event.x;\n        d.fy = d3.event.y;\n      }\n\n      function dragEnded(d) {\n        if (!d3.event.active) simulation.alphaTarget(0);\n        d.fx = null;\n        d.fy = null;\n      }\n\n      return d3.drag().on(\"start\", dragStarted).on(\"drag\", dragged).on(\"end\", dragEnded);\n    };\n  }\n\n  chart(nodes, links) {\n    const width = 1920;\n    const height = 1080;\n    const obj_links = links.map(d => Object.create(d));\n    const obj_nodes = nodes.map(d => Object.create(d));\n    const svg = d3.create(\"svg\").attr(\"viewBox\", [0, 0, width, height]);\n    const link = svg.append(\"g\").attr(\"stroke\", \"#999\").attr(\"stroke-opacity\", 0.6).selectAll(\"line\").data(obj_links).join(\"line\").attr(\"stroke-width\", d => Math.sqrt(d.value));\n\n    const color = node => {\n      if (node.group == 1) {\n        return d3.color(\"steelblue\");\n      }\n\n      return d3.color(\"pink\");\n    };\n\n    const radius = node => {\n      if (node.group == 1) {\n        return 20;\n      }\n\n      return 40;\n    };\n\n    const simulation = d3.forceSimulation(obj_nodes).force(\"link\", d3.forceLink().links(links).id(d => {\n      return d.index;\n    }).distance(200)).force(\"charge\", d3.forceManyBody()).force(\"center\", d3.forceCenter(width / 2, height / 2));\n    const node = svg.append(\"g\").attr(\"stroke\", \"#fff\").attr(\"stroke-width\", 1.5).selectAll(\"circle\").data(obj_nodes).join(\"circle\").attr(\"r\", radius).attr(\"fill\", color).call(this.drag(simulation));\n    simulation.on(\"tick\", () => {\n      link.attr(\"x1\", d => d.source.x).attr(\"y1\", d => d.source.y).attr(\"x2\", d => d.target.x).attr(\"y2\", d => d.target.y);\n      node.attr(\"cx\", d => d.x).attr(\"cy\", d => d.y);\n    });\n    return svg.node();\n  }\n\n  componentDidMount() {\n    const elem = document.getElementById(\"mysvg\");\n    elem.appendChild(this.chart(data.nodes, data.links));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: \"mysvg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 10\n      }\n    });\n  }\n\n}\nexport default Graph;","map":{"version":3,"sources":["/Users/williamstansbury/Desktop/CS185/test-app/src/Components/Graph.js"],"names":["React","Component","d3","require","data","nodes","name","group","links","source","target","value","Graph","drag","simulation","dragStarted","d","event","active","alphaTarget","restart","fx","x","fy","y","dragged","dragEnded","on","chart","width","height","obj_links","map","Object","create","obj_nodes","svg","attr","link","append","selectAll","join","Math","sqrt","color","node","radius","forceSimulation","force","forceLink","id","index","distance","forceManyBody","forceCenter","call","componentDidMount","elem","document","getElementById","appendChild","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nvar d3 = require(\"d3\");\n\nconst data = {\n\tnodes: [\n\t\t{\n\t\t\tname: \"John\",\n\t\t\tgroup: 1\n\t\t},\n\t\t{\n\t\t\tname: \"Jane\",\n\t\t\tgroup: 1\n\t\t},\n\t\t{\n\t\t\tname: \"Doe\",\n\t\t\tgroup: 2\n\t\t}\n\t],\n\tlinks: [\n\t\t{\n\t\t\tsource: 1,\n\t\t\ttarget: 1,\n\t\t\tvalue: 1\n\t\t},\n\n\t]\n}\n\nexport class Graph extends Component {\n\n\tdrag = (simulation) => {\n\t\tfunction dragStarted(d) {\n\t\t\tif (!d3.event.active) simulation.alphaTarget(0.3).restart();\n\t\t\td.fx = d.x;\n\t\t\td.fy = d.y;\n\t\t}\n\n\t\tfunction dragged(d) {\n\t\t\td.fx = d3.event.x;\n\t\t\td.fy = d3.event.y;\n\t\t}\n\n\t\tfunction dragEnded(d) {\n\t\t\tif (!d3.event.active) simulation.alphaTarget(0);\n\t\t\td.fx = null;\n\t\t\td.fy = null;\n\t\t}\n\n\t\treturn d3.drag()\n\t\t\t.on(\"start\", dragStarted)\n\t\t\t.on(\"drag\", dragged)\n\t\t\t.on(\"end\", dragEnded)\n\t}\n\n\tchart(nodes, links) {\n\t\tconst width = 1920;\n\t\tconst height = 1080;\n\n\t\tconst obj_links = links.map(d => Object.create(d));\n\t\tconst obj_nodes = nodes.map(d => Object.create(d));\n\n\t\tconst svg = d3.create(\"svg\")\n\t\t\t.attr(\"viewBox\", [0,0,width,height]);\n\n\t\tconst link = svg.append(\"g\")\n\t\t\t.attr(\"stroke\", \"#999\")\n\t\t\t.attr(\"stroke-opacity\", 0.6)\n\t\t\t.selectAll(\"line\")\n\t\t\t.data(obj_links)\n\t\t\t.join(\"line\")\n\t\t\t.attr(\"stroke-width\", d => Math.sqrt(d.value));\n\n\t\tconst color = (node) => {\n\t\t\tif (node.group == 1) {\n\t\t\t\treturn d3.color(\"steelblue\")\n\t\t\t}\n\t\t\treturn d3.color(\"pink\");\n\t\t}\n\n\t\tconst radius = (node) => {\n\t\t\tif (node.group == 1) {\n\t\t\t\treturn 20;\n\t\t\t}\n\t\t\treturn 40;\n\t\t}\n\n\t\tconst simulation = d3.forceSimulation(obj_nodes)\n\t\t\t.force(\"link\", d3.forceLink().links(links).id(d => { return d.index; }).distance(200))\n\t\t\t.force(\"charge\", d3.forceManyBody())\n\t\t\t.force(\"center\", d3.forceCenter(width / 2, height / 2));\n\n\t\tconst node = svg.append(\"g\")\n\t\t\t.attr(\"stroke\", \"#fff\")\n\t\t\t.attr(\"stroke-width\", 1.5)\n\t\t\t.selectAll(\"circle\")\n\t\t\t.data(obj_nodes)\n\t\t\t.join(\"circle\")\n\t\t\t.attr(\"r\", radius)\n\t\t\t.attr(\"fill\", color)\n\t\t\t.call(this.drag(simulation))\n\n\t\tsimulation.on(\"tick\", () => {\n\t\t\tlink\n\t\t\t\t.attr(\"x1\", d => d.source.x)\n\t\t\t\t.attr(\"y1\", d => d.source.y)\n\t\t\t\t.attr(\"x2\", d => d.target.x)\n\t\t\t\t.attr(\"y2\", d => d.target.y);\n\n\t\t\tnode\n\t\t\t\t.attr(\"cx\", d => d.x)\n\t\t\t\t.attr(\"cy\", d => d.y);\n\t\t})\n\n\t\treturn svg.node()\n\t}\n\n\tcomponentDidMount () {\n\t\tconst elem = document.getElementById(\"mysvg\");\n\n\t\telem.appendChild(this.chart(data.nodes, data.links));\n\t}\n\n\trender() {\n\t\treturn <div id = \"mysvg\">\n\t\t</div>\n\t}\n}\n\nexport default Graph;\n"]},"metadata":{},"sourceType":"module"}