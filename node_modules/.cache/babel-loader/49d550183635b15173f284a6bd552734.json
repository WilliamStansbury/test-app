{"ast":null,"code":"var _jsxFileName = \"/Users/williamstansbury/Desktop/CS185/test-app/src/Components/AddMovie.js\";\nimport React, { Component } from 'react';\nimport ScrollUpButton from \"react-scroll-up-button\";\nimport { SRLWrapper } from 'simple-react-lightbox';\nimport ReactDOM from 'react-dom';\n\nconst axios = require('axios');\n\nvar notGonnaWork;\nvar images = [];\nexport class AddMovies extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: {},\n      MovieID: \"\"\n    };\n    this.handleChangeMovieID = this.handleChangeMovieID.bind(this);\n  }\n\n  componentDidMount() {\n    firebase.initializeApp(config);\n    let ref = firebase.database().ref('movies');\n    console.log(ref);\n    ref.on('value', snapshot => {\n      const data = snapshot.val();\n      console.log(Object.values(data)); // console.log(Object.values)\n\n      this.setState({\n        data: Object.values(data)\n      });\n      notGonnaWork = this.state;\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    console.log(\"update?\"); //only call set state here if it is wrapped in a condition\n    //if you initialize this.state.shouldUpdate and have not changed it yet then this will not run\n    //filp shouldUpdate in the onclick function\n    //react form / submit button\n\n    if (this.state.shouldUpdate !== prevState.shouldUpdate) {\n      let ref = firebase.database().ref('movies');\n      ref.on('value', snapshot => {\n        const data = snapshot.val();\n        this.setState({\n          data: Object.values(data)\n        });\n      });\n    }\n  }\n\n  handleChangeMovieID(event) {\n    this.setState({\n      movieIDValue: event.target.value\n    });\n  }\n\n  handleSubmit(event) {\n    const now = new Date();\n    var jsonBody = {\n      \"movieID\": this.state.movieValue\n    };\n    firebase.database().ref('movies').push().set(jsonBody);\n    alert('Movie Submitted!');\n    event.preventDefault();\n    this.setState({\n      shouldUpdate: !this.state.shouldUpdate\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(ScrollUpButton, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 5\n      }\n    }, \"AddMovies\"), /*#__PURE__*/React.createElement(SRLWrapper, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"innerArray\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 6\n      }\n    })));\n  }\n\n}\nexport default AddMovies;","map":{"version":3,"sources":["/Users/williamstansbury/Desktop/CS185/test-app/src/Components/AddMovie.js"],"names":["React","Component","ScrollUpButton","SRLWrapper","ReactDOM","axios","require","notGonnaWork","images","AddMovies","constructor","props","state","data","MovieID","handleChangeMovieID","bind","componentDidMount","firebase","initializeApp","config","ref","database","console","log","on","snapshot","val","Object","values","setState","componentDidUpdate","prevProps","prevState","shouldUpdate","event","movieIDValue","target","value","handleSubmit","now","Date","jsonBody","movieValue","push","set","alert","preventDefault","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport ScrollUpButton from \"react-scroll-up-button\";\nimport { SRLWrapper } from 'simple-react-lightbox';\nimport ReactDOM from 'react-dom'\n\nconst axios = require('axios');\n\nvar notGonnaWork;\n\nvar images = [];\n\nexport class AddMovies extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {data: {},\n\t\t\tMovieID: \"\",\n\t\t}\n\t\tthis.handleChangeMovieID = this.handleChangeMovieID.bind(this);\n\t}\n\n\tcomponentDidMount(){\n\t\tfirebase.initializeApp(config)\n\t\tlet ref = firebase.database().ref('movies')\n\t\tconsole.log(ref)\n\t\tref.on('value', snapshot => {\n\t\t\tconst data = snapshot.val()\n\t\t\tconsole.log(Object.values(data))\n\n\t\t\t// console.log(Object.values)\n\t\t\tthis.setState({data: Object.values(data)})\n\t\t\tnotGonnaWork = this.state\n\t\t})\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState, snapshot){\n\t\tconsole.log(\"update?\")\n\t\t\n\t\t//only call set state here if it is wrapped in a condition\n\t\t//if you initialize this.state.shouldUpdate and have not changed it yet then this will not run\n\n\t\t//filp shouldUpdate in the onclick function\n\n\t\t//react form / submit button\n\t\tif(this.state.shouldUpdate !== prevState.shouldUpdate){\n\t\tlet ref = firebase.database().ref('movies')\n\t\tref.on('value', snapshot => {\n\t\t\tconst data = snapshot.val()\n\t\t\tthis.setState({data: Object.values(data)})\n\t\t})\n\n\t\t}\n\t}\n\n\thandleChangeMovieID(event) {\n\t    this.setState({movieIDValue: event.target.value});\n\t}\n\n\thandleSubmit(event) {\n\t  \tconst now = new Date();\n\t  \tvar jsonBody = {\n\t  \t\t\"movieID\": this.state.movieValue\n\t\t}\n\t  \t\t\n\t\tfirebase.database().ref('movies').push().set(jsonBody)\n\n\t\talert('Movie Submitted!');\n\t\t   \n\t  \tevent.preventDefault();\n\t  \tthis.setState({shouldUpdate: !this.state.shouldUpdate})\n\t  }\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<ScrollUpButton />\n\t\t\t\t<h1>AddMovies</h1>\n\t\t\t\t<SRLWrapper> \n\t\t\t\t\t<div id = \"innerArray\">\n\t\t\t\t\t</div>\n\t\t\t\t</SRLWrapper>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default AddMovies;"]},"metadata":{},"sourceType":"module"}