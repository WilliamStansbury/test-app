{"ast":null,"code":"import _defineProperty from\"/Users/williamstansbury/Desktop/CS185/test-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/williamstansbury/Desktop/CS185/test-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/williamstansbury/Desktop/CS185/test-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/williamstansbury/Desktop/CS185/test-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/williamstansbury/Desktop/CS185/test-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/williamstansbury/Desktop/CS185/test-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import ScrollUpButton from\"react-scroll-up-button\";import{SRLWrapper}from'simple-react-lightbox';import ReactDOM from'react-dom';import config from'./config.js';var firebase=require('firebase');var axios=require('axios');var notGonnaWork;var images=[];firebase.initializeApp(config);var ref=firebase.database().ref('movies');function userExistsCallback(userId,exists){if(exists){alert('user '+userId+' exists!');}else{alert('user '+userId+' does not exist!');}}var USERS_LOCATION='https://console.firebase.google.com/u/0/project/hci-db/database/hci-db/data/~2Fmovies';function checkIfUserExists(userId){// var usersRef = new firebase(USERS_LOCATION);\nref.child('movies').orderByChild(\"id\").equalTo(userId).once('value',function(snapshot){// var exists = (snapshot.val() !== null);\nif(snapshot.exists()){var userData=snapshot.val();alert(\"exists!\");console.log(\"exists!\",userData);}else{alert(\"does not exist\");}// alert(exists)\n// userExistsCallback(userId, exists);\n});}// function checkForFirstTime(userId) {\n//   ref.child('movies').child(userId).once('value', function(snapshot) {\n//     var exists = (snapshot.id !== null);\n//     userExistsCallback(userId, exists);\n//   });\n// }\nexport var AddMovie=/*#__PURE__*/function(_Component){_inherits(AddMovie,_Component);var _super=_createSuper(AddMovie);function AddMovie(props){var _this;_classCallCheck(this,AddMovie);_this=_super.call(this,props);_this.state={movies:{},shouldUpdate:false,MovieValue:\"\"};_this.handleChangeMovieID=_this.handleChangeMovieID.bind(_assertThisInitialized(_this));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(AddMovie,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;console.log(ref);ref.on('value',function(snapshot){var movies=snapshot.val();console.log(Object.values(movies));// console.log(Object.values)\n_this2.setState({movies:Object.values(movies)});notGonnaWork=_this2.state;});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState,snapshot){var _this3=this;console.log(\"update?\");//only call set state here if it is wrapped in a condition\n//if you initialize this.state.shouldUpdate and have not changed it yet then this will not run\n//filp shouldUpdate in the onclick function\n//react form / submit button\nif(this.state.shouldUpdate!==prevState.shouldUpdate){var _ref=firebase.database().ref('movies');_ref.on('value',function(snapshot){var data=snapshot.val();_this3.setState({movies:Object.values(data)});});}}},{key:\"handleChangeMovieID\",value:function handleChangeMovieID(event){this.setState({movieValue:event.target.value});}},{key:\"handleInputChange\",value:function handleInputChange(event){var target=event.target;var value=target.checked;var name=target.name;this.setState(_defineProperty({},name,value));}},{key:\"handleSubmit\",value:function handleSubmit(event){var testID=this.state.movieValue;event.preventDefault();var exists=false;// firebase.database().ref('movies').push().set(jsonBody)\naxios.get(\"https://www.omdbapi.com/?apikey=71e07b98&i=\"+this.state.movieValue).then(function(response){console.log(response);// codeBlock = codeBlock + '<div class=\"container\"><img src =' + url + ' class = \"image\"/><div class = \"middle\"><div class=\"text\"></div></div></div>'\n}).then(function(response){exists=true;firebase.database().ref('movies').child(testID).set(testID);alert('Movie Submitted!');event.preventDefault();this.setState({shouldUpdate:!this.state.shouldUpdate});}).catch(function(error){exists=false;// alert(\"error\")\nevent.preventDefault();console.error(error);});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(ScrollUpButton,null),/*#__PURE__*/React.createElement(\"header\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"AddMovie\")),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"label\",null,\"Movie ID:\",/*#__PURE__*/React.createElement(\"input\",{type:\"text\",value:this.state.value,onChange:this.handleChangeMovieID})),/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Submit\"}),/*#__PURE__*/React.createElement(\"div\",null,console.log(Object.values(this.state.movies)),Object.values(this.state.movies).map(function(s,index){return/*#__PURE__*/React.createElement(\"p\",null,s.id);}))),/*#__PURE__*/React.createElement(\"p\",null,\"To grader: I was unable to disallow invalid movie IDs, but invalid IDs do not pose a problem for the rest of the program.\"));}}]);return AddMovie;}(Component);export default AddMovie;","map":{"version":3,"sources":["/Users/williamstansbury/Desktop/CS185/test-app/src/Components/AddMovie.js"],"names":["React","Component","ScrollUpButton","SRLWrapper","ReactDOM","config","firebase","require","axios","notGonnaWork","images","initializeApp","ref","database","userExistsCallback","userId","exists","alert","USERS_LOCATION","checkIfUserExists","child","orderByChild","equalTo","once","snapshot","userData","val","console","log","AddMovie","props","state","movies","shouldUpdate","MovieValue","handleChangeMovieID","bind","handleSubmit","on","Object","values","setState","prevProps","prevState","data","event","movieValue","target","value","checked","name","testID","preventDefault","get","then","response","set","catch","error","map","s","index","id"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport ScrollUpButton from \"react-scroll-up-button\";\nimport { SRLWrapper } from 'simple-react-lightbox';\nimport ReactDOM from 'react-dom'\nimport config from './config.js'\nconst firebase = require('firebase');\nconst axios = require('axios');\n\nvar notGonnaWork;\n\nvar images = [];\n\nfirebase.initializeApp(config)\nvar ref = firebase.database().ref('movies')\n\nfunction userExistsCallback(userId, exists) {\n  if (exists) {\n    alert('user ' + userId + ' exists!');\n  } else {\n    alert('user ' + userId + ' does not exist!');\n  }\n}\n\nvar USERS_LOCATION = 'https://console.firebase.google.com/u/0/project/hci-db/database/hci-db/data/~2Fmovies'\n\nfunction checkIfUserExists(userId) {\n  // var usersRef = new firebase(USERS_LOCATION);\n  ref.child('movies').orderByChild(\"id\").equalTo(userId).once('value', function(snapshot) {\n    // var exists = (snapshot.val() !== null);\n    if (snapshot.exists()){\n      const userData = snapshot.val();\n      alert(\"exists!\")\n      console.log(\"exists!\", userData);\n    } else {\n    \talert(\"does not exist\")\n    }\n    // alert(exists)\n    // userExistsCallback(userId, exists);\n  });\n}\n\n\n// function checkForFirstTime(userId) {\n//   ref.child('movies').child(userId).once('value', function(snapshot) {\n//     var exists = (snapshot.id !== null);\n//     userExistsCallback(userId, exists);\n//   });\n// }\n\n\nexport class AddMovie extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {movies: {},\n\t\t\tshouldUpdate: false,\n\t\t\tMovieValue: \"\"\n\t\t}\n\t\tthis.handleChangeMovieID = this.handleChangeMovieID.bind(this);\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t}\n\n\tcomponentDidMount(){\n\t\t\n\t\tconsole.log(ref)\n\t\tref.on('value', snapshot => {\n\t\t\tconst movies = snapshot.val()\n\t\t\tconsole.log(Object.values(movies))\n\n\t\t\t// console.log(Object.values)\n\t\t\tthis.setState({movies: Object.values(movies)})\n\t\t\tnotGonnaWork = this.state\n\t\t})\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState, snapshot){\n\t\tconsole.log(\"update?\")\n\t\t\n\t\t//only call set state here if it is wrapped in a condition\n\t\t//if you initialize this.state.shouldUpdate and have not changed it yet then this will not run\n\n\t\t//filp shouldUpdate in the onclick function\n\n\t\t//react form / submit button\n\t\tif(this.state.shouldUpdate !== prevState.shouldUpdate){\n\t\tlet ref = firebase.database().ref('movies')\n\t\tref.on('value', snapshot => {\n\t\t\tconst data = snapshot.val()\n\t\t\tthis.setState({movies: Object.values(data)})\n\t\t})\n\n\t\t}\n\t}\n\n\thandleChangeMovieID(event) {\n\t    this.setState({movieValue: event.target.value});\n\t}\n\n\thandleInputChange(event) {\n    const target = event.target;\n    const value = target.checked;\n    const name = target.name;\n\n    this.setState({\n      [name]: value\n    });\n  }\n\n\thandleSubmit(event) {\n\t\tvar testID = this.state.movieValue;\n\t\tevent.preventDefault();\n\n\t\tvar exists = false;\n\t  \t\t\n\t\t// firebase.database().ref('movies').push().set(jsonBody)\n\taxios.get(\"https://www.omdbapi.com/?apikey=71e07b98&i=\" + this.state.movieValue).then(function(response) {\n\t\tconsole.log(response);\n\t\t// codeBlock = codeBlock + '<div class=\"container\"><img src =' + url + ' class = \"image\"/><div class = \"middle\"><div class=\"text\"></div></div></div>'\n\t}).then(function(response) {\n\t\texists = true;\n\t\tfirebase.database().ref('movies').child(testID).set(testID)\n\n\t\talert('Movie Submitted!');\n\t\t   \n\t  \tevent.preventDefault();\n\t  \tthis.setState({shouldUpdate: !this.state.shouldUpdate})\n\n\t}).catch(function(error) {\n\t\texists = false;\n\t\t// alert(\"error\")\n\t\tevent.preventDefault();\n\t  \tconsole.error(error)\n\t})\n\n\n\t\t\n\t  }\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<ScrollUpButton />\n\t\t\t\t<header>\n\t\t\t\t\t<h1>AddMovie</h1>\n\t\t\t\t</header>\n\t\t\t\t<form onSubmit={this.handleSubmit}>\n\t\t\t\t\t\n\t\t\t\t\t<label>\n\t\t\t\t\t\tMovie ID:\n\t\t\t\t\t\t\n\t\t\t\t\t        <input type=\"text\" value={this.state.value} onChange={this.handleChangeMovieID} />\n\t\t\t\t\t    </label>\n\t\t\t\t\t    <input type=\"submit\" value=\"Submit\" />\n\t\t\t\t\t    <div>\n\t\t\t\t\t    {\n\t\t\t\t\t\t\tconsole.log(Object.values(this.state.movies))\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tObject.values(this.state.movies).map((s,index) => (\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\t{s.id}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t}\n\t\t\t\t\t    </div>\n\t\t\t\t\t\n\t\t\t\t</form>\n\t\t\t\t<p>To grader: I was unable to disallow invalid movie IDs, but invalid IDs do not pose a problem for the rest of the program.</p>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default AddMovie;"]},"metadata":{},"sourceType":"module"}